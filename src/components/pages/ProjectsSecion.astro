---
import { projects } from "../../data/projects";
import { getLangFromUrl, useTranslations } from "../../i18n/utils";
import Button from "../Button.astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<div class="pt-10 md:pt-16" id="projects">
  <h1 class="md:text-4xl text-2xl font-bold mt-0 text-amber-200/90 mb-5">
    {t("MY_PROJECTS")}
  </h1>

  <h2 class="mb-6 -mt-2 text-lg text-neutral-400">
    {t("MY_PROJECTS_DESCRIPTION")}
  </h2>

  <div class="flex flex-col justify-center items-center mt-10 gap-3 md:gap-5">
    {
      projects.map(
        ({ heroImage, title, description, webpage, github, tags }) => (
          <article class="flex md:flex-row flex-col w-full h-full bg-gray-700/40 rounded-2xl p-4 gap-2">
            <img
              class="rounded-xl min-h-40 mb-4 md:m-0"
              width={420}
              height={240}
              src={heroImage}
              alt={title}
            />

            <div class="flex flex-col md:px-4 md:justify-between h-full">
              <h4 class="m-0 text-lg md:text-xl font-bold text-white">
                {title}
              </h4>

              <p class="m-0 mt-3 text-base text-neutral-400 text-pretty">
                {description[lang]}
              </p>

              {tags && (
                <div class="flex flex-wrap gap-2 mt-4">
                  {tags.map((tag) => (
                    <div class="flex items-center gap-1.5 bg-gray-700/50 rounded-2xl px-2.5 py-1.5">
                      <tag.icon class="size-5" />
                      <span class="text-sm text-neutral-400">{tag.name}</span>
                    </div>
                  ))}
                </div>
              )}

              <div class="w-full flex flex-col md:flex-row gap-2 mt-8 md:mt-12">
                <Button icon="tabler:link" href={webpage} text={title} />
                {github && (
                  <Button
                    icon="mdi:github"
                    href={github}
                    text={t("REPO_TEXT")}
                  />
                )}
              </div>
            </div>
          </article>
        ),
      )
    }
  </div>
</div>
