---
import { getCollection } from "astro:content";
import FormattedDate from "../../components/FormattedDate.astro";
import MainLayout from "../../layouts/MainLayout.astro";

const posts = (await getCollection("blog")).sort(
	(a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf(),
);
---

<MainLayout title="Mi blog personal">
	<main class="w-[960px]">
		<section>
			<ul class="grid grid-cols-1 md:grid-cols-2 list-none m-0 p-0 gap-3 md:gap-8">
				{
					posts.map((post) => (
						<li class="w-full text-center md:text-start list-none">
							<a href={`/blog/${post.slug}/`}>
								<img
									class="mb-3 rounded-xl hover:shadow-xl hover:shadow-blue-800/20"
									width={720}
									height={360}
									src={post.data.heroImage}
									alt={post.data.title}
									transition:name={post.data.heroImage}
								/>
								<h4 class="m-0">{post.data.title}</h4>
								<p class="text-neutral-500">
									<FormattedDate date={post.data.pubDate} />
								</p>
							</a>
						</li>
					))
				}
			</ul>
		</section>
	</main>
</MainLayout>

<style>
	ul li * {
		transition: 0.2s ease;
	}
	ul li a:hover h4,
	ul li a:hover .date {
		color: rgb(var(--accent));
	}
</style>
